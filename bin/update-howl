#!/bin/sh
# update howl editor

test -d ~/dev/howl/ || { git clone https://github.com/howl-editor/howl.git ~/dev/howl; new=1; }
cd ~/dev/howl/

test "$new" != "1" && {
 # check if pull is needed
 local_commit=$(git rev-parse HEAD)
 remote_commit=$(git ls-remote origin -h refs/heads/master | cut -f 1)
 test "$local_commit" = "$remote_commit" && exit
 git pull
}

cd src
make CC=clang || exit 1
sudo make CC=clang PREFIX=/usr/local install || exit 1
